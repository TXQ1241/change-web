<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=0">

	<title>个人资料</title>

	<link href="./css/index.css" rel="stylesheet" type="text/css" />
	<link href="./libs/css/amazeui.css" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" href="./iconfont/iconfont.css">
	<link href="./css/personal.css" rel="stylesheet" type="text/css">
	<link href="./css/infstyle.css" rel="stylesheet" type="text/css">
	<script src="./libs/js/jquery.min.js"></script>
	<script src="./libs/js/amazeui.min.js"></script>
	<style>
		@media only screen and (min-width: 640px) {
			.am-form-content {
				margin-left: 85px;
				padding-top: 0px;
			}
		}

		.header .message-l {
			display: none;
		}
	</style>

</head>

<body>
	<!--头 -->
	<header>
		<article>
			<div class="mt-logo">
				<!--顶部导航条 -->
				<div class="am-container header">
					<ul class="message-l">
						<div class="topMessage">
							<div class="menu-hd">
								<a href="#" target="_top" class="h">亲，请登录</a>
								<a href="#" target="_top">免费注册</a>
							</div>
						</div>
					</ul>
					<ul class="message-r">
						<div class="topMessage home">
							<div class="menu-hd">
								<a href="./index.html" target="_top" class="h">商城首页</a>
							</div>
						</div>
						<div class="topMessage my-shangcheng">
							<div class="menu-hd MyShangcheng">
								<a href="./information.html" target="_top">
									<i class="iconfont icon-gerenzhongxin"></i>个人中心</a>
							</div>
						</div>
						<div class="topMessage mini-cart">
							<div class="menu-hd">
								<a id="mc-menu-hd" href="./shopcart.html" target="_top">
									<i class="iconfont icon-gouwuche"></i>
									<span>购物车</span>
								</a>
							</div>
						</div>
						<div class="topMessage favorite">
							<div class="menu-hd">
								<a href="./collection.html" target="_top">
									<i class="iconfont icon-shoucangjia"></i>
									<span>收藏夹</span>
								</a>
							</div>
						</div>
					</ul>
				</div>

				<!--悬浮搜索框-->

				<div class="nav white">
					<div class="search-bar pr">
						<a name="index_none_header_sysc" href="#"></a>
						<form>
							<input id="searchInput" name="index_none_header_sysc" type="text" placeholder="搜索" autocomplete="off">
							<input id="ai-topsearch" class="submit am-btn" value="搜索" index="1" type="submit">
						</form>
					</div>
				</div>

				<div class="clear"></div>
			</div>
			</div>
		</article>
	</header>
	<div class="nav-table">
		<div class="long-title">
			<span class="all-goods">全部分类</span>
		</div>
		<div class="nav-cont">
			<ul>
				<li class="index">
					<a href="./index.html">首页</a>
				</li>
				<li class="qc">
					<a href="./seller.html" id="sellerSrc">卖家中心</a>
				</li>
				<li class="qc">
					<a href="./search.html">买家中心</a>
				</li>
				<li class="qc">
					<a href="#">数据统计</a>
				</li>
			</ul>
		</div>
	</div>
	<b class="line"></b>
	<div class="center">
		<div class="col-main">
			<div class="main-wrap">

				<div class="user-info">
					<!--标题 -->
					<div class="am-cf am-padding">
						<div class="am-fl am-cf">
							<strong class="am-text-danger am-text-lg">个人资料</strong>
						</div>
					</div>
					<hr/>

					<!--头像 -->
					<div class="user-infoPic">

						<div class="filePic">
							<input type="file" class="inputPic" allowexts="gif,jpeg,jpg,png,bmp" accept="image/*">
							<img class="am-circle am-img-thumbnail" src="./images/information/getAvatar.do.jpg" alt="" />
						</div>

						<p class="am-form-help">头像</p>
					</div>

					<!--个人信息 -->
					<div class="info-main">

					</div>

				</div>

			</div>
		</div>

		<aside class="menu">
			<ul>
				<li class="person">
					<a>个人中心</a>
				</li>
				<li class="person">
					
					<ul>
						<li class="active">
							<a href="information.html">个人信息</a>
						</li>
					</ul>
				</li>
				<li class="person">
					
					<ul>
						<li>
							<a href="order.html">订单管理</a>
						</li>
					</ul>
				</li>

				<li class="person">
					
					<ul>
						<li>
							<a href="collection.html">收藏</a>
						</li>
						<li>
							<a href="comment.html">评价</a>
						</li>
					</ul>
				</li>

			</ul>

		</aside>
	</div>

</body>
<script src="./js/ServerUtil.js"></script>
<script src="./js/data.js"></script>
<script>
	$(function () {
		var unSd = {
			account: '账号',
			idCard: '身份证号'
		};
		var sd = {
			userName: '用户名',
			phoneNum: '手机号',
			email: '邮箱'
		};
		var str = '';
		var userId;
		ServerUtil.api('change-web/user/', 'getUserInfo', {}, function (data) {
			userId = data.id;
			for (var attr in data) {
				if (unSd[attr]) {
					var data1 = data[attr] || '';
					str += '<div class="am-form-group"><label class="am-form-label">' + unSd[attr] +
						':</label><div class="am-form-content">' + data1 + '</div></div>';
				}
				if (sd[attr]) {
					var data2 = data[attr] || '';
					str += '<div class="am-form-group"><label class="am-form-label">' + sd[attr] +
						':</label><div class="am-form-content"><input type="text" value="' + data2 + '" id="' + attr +
						'"></div></div>';
				}
			}
			str += '<div class="info-btn"><div class="am-btn am-btn-danger">保存修改</div></div>'
			$('.info-main').html(str);
			$('.am-btn').on('click', function () {
				ServerUtil.api('change-web/user/', 'save', {
					id: userId,
					userName: $('#userName').val(),
					phoneNum: $('#phoneNum').val(),
					email: $('#email').val(),
				}, function () {
					window.location.href = window.location.origin + '/change-web/information.html';
				});
			});
		});

		//判断是否登录
		ServerUtil.api('change-web/login/', 'loginStatus', {}, function (result) {
			if (result.userName) {
				$('.header .message-l .topMessage .menu-hd a').hide();
				$('.header .message-r').show();
			} else {
				$('#sellerSrc')[0].href = './login.html';
			}
		});
		$('#ai-topsearch').on('click', function (e) {
			e.preventDefault();
			var inputVal = encodeURI($('#searchInput').val() || '');
			window.location.href = window.location.origin + '/change-web/search.html?goodsName=' + inputVal;
		});

	});
</script>

</html>