<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=0">

	<title>修改密码</title>

	<link href="./css/index.css" rel="stylesheet" type="text/css" />
	<link href="./libs/css/amazeui.css" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" href="./iconfont/iconfont.css">
	<link href="./css/personal.css" rel="stylesheet" type="text/css">
	<link href="./css/stepstyle.css" rel="stylesheet" type="text/css">

	<style>
		.header .message-l {
			display: none;
		}
	</style>
</head>

<body>
	<!--头 -->
	<header>
		<article>
			<div class="mt-logo">
				<!--顶部导航条 -->
				<div class="am-container header">
					<ul class="message-l">
						<div class="topMessage">
							<div class="menu-hd">
								<a href="#" target="_top" class="h">亲，请登录</a>
								<a href="#" target="_top">免费注册</a>
							</div>
						</div>
					</ul>
					<ul class="message-r">
						<div class="topMessage home">
							<div class="menu-hd">
								<a href="./index.html" target="_top" class="h">商城首页</a>
							</div>
						</div>
						<div class="topMessage my-shangcheng">
							<div class="menu-hd MyShangcheng">
								<a href="./information.html" target="_top">
									<i class="iconfont icon-gerenzhongxin"></i>个人中心</a>
							</div>
						</div>
						<div class="topMessage mini-cart">
							<div class="menu-hd">
								<a id="mc-menu-hd" href="./shopcart.html" target="_top">
									<i class="iconfont icon-gouwuche"></i>
									<span>购物车</span>
								</a>
							</div>
						</div>
						<div class="topMessage favorite">
							<div class="menu-hd">
								<a href="./collection.html" target="_top">
									<i class="iconfont icon-shoucangjia"></i>
									<span>收藏夹</span>
								</a>
							</div>
						</div>
					</ul>
				</div>

				<!--悬浮搜索框-->

				<div class="nav white">

					<div class="search-bar pr">
						<a name="index_none_header_sysc" href="#"></a>
						<form>
							<input id="searchInput" name="index_none_header_sysc" type="text" placeholder="搜索" autocomplete="off">
							<input id="ai-topsearch" class="submit am-btn" value="搜索" index="1" type="submit">
						</form>
					</div>
				</div>

				<div class="clear"></div>
			</div>
			</div>
		</article>
	</header>
	<div class="nav-table">
		<div class="long-title">
			<span class="all-goods">全部分类</span>
		</div>
		<div class="nav-cont">
			<ul>
				<li class="index">
					<a href="./index.html">首页</a>
				</li>
				<li class="qc">
					<a href="./seller.html">卖家中心</a>
				</li>
				<li class="qc">
					<a href="./search.html">买家中心</a>
				</li>
				<li class="qc">
					<a href="#">数据统计</a>
				</li>
			</ul>
		</div>
	</div>
	<b class="line"></b>
	<div class="center">
		<div class="col-main">
			<div class="main-wrap">

				<div class="am-cf am-padding">
					<div class="am-fl am-cf">
						<strong class="am-text-danger am-text-lg">修改密码</strong>
					</div>
				</div>
				<hr/>
				<!--进度条-->
				<div class="m-progress">
					<div class="m-progress-list">
						<span class="step-1 step">
							<em class="u-progress-stage-bg"></em>
							<i class="u-stage-icon-inner">1
								<em class="bg"></em>
							</i>
							<p class="stage-name">重置密码</p>
						</span>
						<span class="step-2 step">
							<em class="u-progress-stage-bg"></em>
							<i class="u-stage-icon-inner">2
								<em class="bg"></em>
							</i>
							<p class="stage-name">完成</p>
						</span>
						<span class="u-progress-placeholder"></span>
					</div>
					<div class="u-progress-bar total-steps-2">
						<div class="u-progress-bar-inner"></div>
					</div>
				</div>
				<form class="am-form am-form-horizontal">
					<div class="am-form-group">
						<label for="user-old-password" class="am-form-label">原密码</label>
						<div class="am-form-content">
							<input type="password" id="user-old-password" placeholder="请输入原登录密码">
						</div>
					</div>
					<div class="am-form-group">
						<label for="user-new-password" class="am-form-label">新密码</label>
						<div class="am-form-content">
							<input type="password" id="user-new-password" placeholder="请输入新密码">
						</div>
					</div>
					<div class="am-form-group">
						<label for="user-confirm-password" class="am-form-label">确认密码</label>
						<div class="am-form-content">
							<input type="password" id="user-confirm-password" placeholder="请再次输入上面的密码">
						</div>
					</div>
					<div class="info-btn">
						<div class="am-btn am-btn-danger">保存修改</div>
					</div>

				</form>

			</div>
		</div>

		<aside class="menu">
			<ul>
				<li class="person">
					<a>个人中心</a>
				</li>
				<li class="person">

					<ul>
						<li>
							<a href="information.html">个人信息</a>
						</li>
						<li class="active">
							<a href="password.html">修改密码</a>
						</li>
					</ul>
				</li>
				<li class="person">

					<ul>
						<li>
							<a href="order.html">订单管理</a>
						</li>
					</ul>
				</li>

				<li class="person">

					<ul>
						<li>
							<a href="collection.html">收藏</a>
						</li>
						<li>
							<a href="comment.html">评价</a>
						</li>
					</ul>
				</li>

			</ul>

		</aside>
	</div>

</body>
<script src="./libs/layui/layui.all.js"></script>
<script src="./js/ServerUtil.js"></script>
<script>
	var $;
	var jQuery;
	layui.use(['layer'], function () {
		jQuery = layui.$;
		$ = layui.$;
		var layer = layui.layer;

		var userInfo;
		ServerUtil.api('change-web/user/', 'getUserInfo', {}, function (result) {
			userInfo = result;
		});

		$('.am-btn-danger').on('click', function () {
			var newPassword = $('#user-old-password').val();
			var ackPassword = $('#user-confirm-password').val();
			if (newPassword != userInfo.password) {
				layer.msg('原始密码不正确', {
					time: 1000
				});
			} else if (newPassword != ackPassword) {
				layer.msg('两次输入密码不一致', {
					time: 1000
				});
			} else if (!newPassword) {
				layer.msg('密码不能为空', {
					time: 1000
				});
			} else {
				ServerUtil.api('change-web/user/', 'userChangePassword', {
					id: userInfo.id,
					password: newPassword
				}, function () {

				});
			}
		});
	});
</script>
<script src="./libs/js/amazeui.min.js"></script>

</html>