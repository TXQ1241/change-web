<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=0">

	<title>订单管理</title>

	<link href="./css/index.css" rel="stylesheet" type="text/css" />
	<link href="./libs/css/amazeui.css" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" href="./iconfont/iconfont.css">
	<link href="./css/personal.css" rel="stylesheet" type="text/css">
	<link href="./css/orstyle.css" rel="stylesheet" type="text/css">

	<style>
		.header .message-l {
			display: none;
		}

		.toIntroduction {
			cursor: pointer;
		}
	</style>
</head>

<body>
	<!--头 -->
	<header>
		<article>
			<div class="mt-logo">
				<!--顶部导航条 -->
				<div class="am-container header">
					<ul class="message-l">
						<div class="topMessage">
							<div class="menu-hd">
								<a href="#" target="_top" class="h">亲，请登录</a>
								<a href="#" target="_top">免费注册</a>
							</div>
						</div>
					</ul>
					<ul class="message-r">
						<div class="topMessage home">
							<div class="menu-hd">
								<a href="./index.html" target="_top" class="h">商城首页</a>
							</div>
						</div>
						<div class="topMessage my-shangcheng">
							<div class="menu-hd MyShangcheng">
								<a href="./information.html" target="_top">
									<i class="iconfont icon-gerenzhongxin"></i>个人中心</a>
							</div>
						</div>
						<div class="topMessage mini-cart">
							<div class="menu-hd">
								<a id="mc-menu-hd" href="./shopcart.html" target="_top">
									<i class="iconfont icon-gouwuche"></i>
									<span>购物车</span>
								</a>
							</div>
						</div>
						<div class="topMessage favorite">
							<div class="menu-hd">
								<a href="./collection.html" target="_top">
									<i class="iconfont icon-shoucangjia"></i>
									<span>收藏夹</span>
								</a>
							</div>
						</div>
					</ul>
				</div>

				<!--悬浮搜索框-->

				<div class="nav white">

					<div class="search-bar pr">
						<a name="index_none_header_sysc" href="#"></a>
						<form>
							<input id="searchInput" name="index_none_header_sysc" type="text" placeholder="搜索" autocomplete="off">
							<input id="ai-topsearch" class="submit am-btn" value="搜索" index="1" type="submit">
						</form>
					</div>
				</div>

				<div class="clear"></div>
			</div>
			</div>
		</article>
	</header>
	<div class="nav-table">
		<div class="long-title">
			<span class="all-goods">全部分类</span>
		</div>
		<div class="nav-cont">
			<ul>
				<li class="index">
					<a href="./index.html">首页</a>
				</li>
				<li class="qc">
					<a href="./seller.html">卖家中心</a>
				</li>
				<li class="qc">
					<a href="./search.html">买家中心</a>
				</li>
				<li class="qc">
					<a href="#">数据统计</a>
				</li>
			</ul>
		</div>
	</div>
	<b class="line"></b>
	<div class="center">
		<div class="col-main">
			<div class="main-wrap">

				<div class="user-order">

					<!--标题 -->
					<div class="am-cf am-padding">
						<div class="am-fl am-cf">
							<strong class="am-text-danger am-text-lg">订单管理</strong>
						</div>
					</div>
					<hr/>

					<div class="am-tabs am-tabs-d2 am-margin" data-am-tabs>

						<ul class="am-avg-sm-5 am-tabs-nav am-nav am-nav-tabs">
							<li class="am-active">
								<a href="#tab1">所有订单</a>
							</li>
							<li>
								<a href="#tab2">待回复</a>
							</li>
							<li>
								<a href="#tab3">被拒绝</a>
							</li>
							<li>
								<a href="#tab4">交易成功</a>
							</li>
						</ul>

						<div class="am-tabs-bd">
							<div class="am-tab-panel am-fade am-in am-active" id="tab1">


							</div>
							<div class="am-tab-panel am-fade" id="tab2">


							</div>
							<div class="am-tab-panel am-fade" id="tab3">

							</div>

							<div class="am-tab-panel am-fade" id="tab4">


							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
		<aside class="menu">
			<ul>
				<li class="person">
					<a>个人中心</a>
				</li>
				<li class="person">
					
					<ul>
						<li>
							<a href="information.html">个人信息</a>
						</li>
						<li>
							<a href="password.html">修改密码</a>
						</li>
					</ul>
				</li>
				<li class="person">
					
					<ul>
						<li class="active">
							<a href="order.html">订单管理</a>
						</li>
					</ul>
				</li>

				<li class="person">
					
					<ul>
						<li>
							<a href="collection.html">收藏</a>
						</li>
						<li>
							<a href="comment.html">评价</a>
						</li>
					</ul>
				</li>

			</ul>

		</aside>
	</div>

</body>
<script type="text/html" id="orderTab1">
	<div class="order-top">
		<div class="th th-item">
			<td class="td-inner">商品</td>
		</div>
		<div class="th th-status">
			<td class="td-inner">交易状态</td>
		</div>
		<div class="th th-change">
			<td class="td-inner">交易操作</td>
		</div>
	</div>

	{{# layui.each(d, function(index, item){ }}
	<div class="order-main">
		<div class="order-list">


			<div class="order-status5">
				<div class="order-title">
					<span>订单时间：{{ item.createTimeStr }}</span>
				</div>
				<div class="order-content">
					<div class="order-left">
						<ul class="item-list">
							<li class="td td-item toIntroduction" data-goodsId="{{ item.goodsId }}">
								<div class="item-pic">
									<a class="J_MakePoint">
										<img src="{{ item.goods.imagesSrc }}" class="itempic J_ItemImg">
									</a>
								</div>
								<div class="item-info">
									<div class="item-basic-info">
										<a>
											<p>{{ item.goods.name }}</p>
										</a>
									</div>
								</div>
							</li>
						</ul>
					</div>
					<div class="order-right">
						<div class="move-right">
							<li class="td td-status">
								<div class="item-status">
									{{# if(item.status == '1'){ }}
									<p class="Mystatus">等待卖家回复</p>
									{{# } }} {{# if(item.status == '2'){ }}
									<p class="Mystatus">已被卖家拒绝</p>
									{{# } }} {{# if(item.status == '3'){ }}
									<p class="Mystatus">交易成功</p>
									{{# } }}
								</div>
							</li>
							<li class="td td-change">
								{{# if(item.status == '1'){ }}
								<div class="am-btn am-btn-danger anniu deleteOrder" data-orderId="{{ item.id }}">
									取消订单</div>
								{{# } }} {{# if(item.status == '2'){ }}
								<div class="am-btn am-btn-danger anniu deleteOrder" data-orderId="{{ item.id }}">
									删除订单</div>
								{{# } }} {{# if(item.status == '3'){ }}
								<div class="am-btn am-btn-danger anniu deleteOrder" data-orderId="{{ item.id }}">
									删除订单</div>
								{{# } }}

							</li>
						</div>
					</div>
				</div>
			</div>

		</div>

	</div>
	{{# }) }}
</script>
<script type="text/html" id="orderTab2">
	<div class="order-top">
		<div class="th th-item">
			<td class="td-inner">商品</td>
		</div>
		<div class="th th-status">
			<td class="td-inner">交易状态</td>
		</div>
		<div class="th th-change">
			<td class="td-inner">交易操作</td>
		</div>
	</div>
	{{# layui.each(d, function(index, item){ }}
	<div class="order-main">
		<div class="order-list">
			<div class="order-status1">
				<div class="order-title">

					<span>订单时间：{{ item.createTimeStr }}</span>
				</div>
				<div class="order-content">
					<div class="order-left">
						<ul class="item-list">
							<li class="td td-item toIntroduction" data-goodsId="{{ item.goodsId }}">
								<div class="item-pic">
									<a class="J_MakePoint">
										<img src="{{ item.goods.imagesSrc }}" class="itempic J_ItemImg">
									</a>
								</div>
								<div class="item-info">
									<div class="item-basic-info">
										<a>
											<p>{{ item.goods.name }}</p>
										</a>
									</div>
								</div>
							</li>
						</ul>
					</div>
					<div class="order-right">
						<div class="move-right">
							<li class="td td-status">
								<div class="item-status">
									<p class="Mystatus">等待卖家回复</p>

								</div>
							</li>
							<li class="td td-change">
								<div class="am-btn am-btn-danger anniu deleteOrder" data-orderId="{{ item.id }}">
									取消订单</div>
							</li>
						</div>
					</div>

				</div>
			</div>
		</div>

	</div>
	{{# }) }}
</script>
<script type="text/html" id="orderTab3">
	<div class="order-top">
		<div class="th th-item">
			<td class="td-inner">商品</td>
		</div>
		<div class="th th-status">
			<td class="td-inner">交易状态</td>
		</div>
		<div class="th th-change">
			<td class="td-inner">交易操作</td>
		</div>
	</div>

	{{# layui.each(d, function(index, item){ }}
	<div class="order-main">
		<div class="order-list">
			<div class="order-status2">
				<div class="order-title">
					<span>订单时间：{{ item.createTimeStr }}</span>
				</div>
				<div class="order-content">
					<div class="order-left">
						<ul class="item-list">
							<li class="td td-item toIntroduction" data-goodsId="{{ item.goodsId }}">
								<div class="item-pic">
									<a class="J_MakePoint">
										<img src="{{ item.goods.imagesSrc }}" class="itempic J_ItemImg">
									</a>
								</div>
								<div class="item-info">
									<div class="item-basic-info">
										<a>
											<p>{{ item.goods.name }}</p>
										</a>
									</div>
								</div>
							</li>
						</ul>
					</div>
					<div class="order-right">
						<div class="move-right">
							<li class="td td-status">
								<div class="item-status">
									<p class="Mystatus">已被卖家拒绝</p>
								</div>
							</li>
							<li class="td td-change">
								<div class="am-btn am-btn-danger anniu deleteOrder" data-orderId="{{ item.id }}">
									删除订单</div>
							</li>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	{{# }) }}
</script>
<script type="text/html" id="orderTab4">
	<div class="order-top">
		<div class="th th-item">
			<td class="td-inner">商品</td>
		</div>
		<div class="th th-status">
			<td class="td-inner">交易状态</td>
		</div>
		<div class="th th-change">
			<td class="td-inner">交易操作</td>
		</div>
	</div>

	{{# layui.each(d, function(index, item){ }}
	<div class="order-main">
		<div class="order-list">
			<!--不同状态的订单	-->
			<div class="order-status4">
				<div class="order-title">

					<span>订单时间：{{ item.createTimeStr }}</span>

				</div>
				<div class="order-content">
					<div class="order-left">
						<ul class="item-list">
							<li class="td td-item toIntroduction" data-goodsId="{{ item.goodsId }}">
								<div class="item-pic">
									<a class="J_MakePoint">
										<img src="{{ item.goods.imagesSrc }}" class="itempic J_ItemImg">
									</a>
								</div>
								<div class="item-info">
									<div class="item-basic-info">
										<a>
											<p>{{ item.goods.name }}</p>
										</a>
									</div>
								</div>
							</li>
						</ul>

					</div>
					<div class="order-right">
						<div class="move-right">
							<li class="td td-status">
								<div class="item-status">
									<p class="Mystatus">交易成功</p>
								</div>
							</li>
							<li class="td td-change">
								<div class="am-btn am-btn-danger anniu deleteOrder" data-orderId="{{ item.id }}">
									删除订单</div>
							</li>
						</div>
					</div>
				</div>
			</div>

		</div>

	</div>
	{{# }) }}
</script>
<script src="./libs/layui/layui.all.js"></script>
<script src="./js/ServerUtil.js"></script>
<script src="./js/page.js"></script>
<script>
	var $;
	var jQuery;
	layui.use(['layer', 'laytpl', 'laypage'], function () {
		jQuery = layui.$;
		$ = layui.$;
		var layer = layui.layer;
		var laytpl = layui.laytpl;
		var laypage = layui.laypage;


		var orderListNum = 0;
		var tab1Tpl = orderTab1.innerHTML,
			tab1View = $('#tab1')[0];

		ServerUtil.api('change-web/orders/', 'getOrdersList', {
			pageNum: 1,
			pageSize: 10
		}, function (result) {
			laytpl(tab1Tpl).render(result.datalist, function (html) {
				tab1View.innerHTML = html;
			});
			orderListNum++;
			if (orderListNum == 4) {
				addBtnEvent();
			}
		});

		var tab2Tpl = orderTab2.innerHTML,
			tab2View = $('#tab2')[0];
		ServerUtil.api('change-web/orders/', 'getOrdersList', {
			pageNum: 1,
			pageSize: 10,
			status: 1
		}, function (result) {
			laytpl(tab2Tpl).render(result.datalist, function (html) {
				tab2View.innerHTML = html;
			});
			orderListNum++;
			if (orderListNum == 4) {
				addBtnEvent();
			}
		});

		var tab3Tpl = orderTab3.innerHTML,
			tab3View = $('#tab3')[0];

		ServerUtil.api('change-web/orders/', 'getOrdersList', {
			pageNum: 1,
			pageSize: 10,
			status: 2
		}, function (result) {
			laytpl(tab3Tpl).render(result.datalist, function (html) {
				tab3View.innerHTML = html;
			});
			orderListNum++;
			if (orderListNum == 4) {
				addBtnEvent();
			}
		});

		var tab4Tpl = orderTab4.innerHTML,
			tab4View = $('#tab4')[0];

		ServerUtil.api('change-web/orders/', 'getOrdersList', {
			pageNum: 1,
			pageSize: 10,
			status: 3
		}, function (result) {
			laytpl(tab4Tpl).render(result.datalist, function (html) {
				tab4View.innerHTML = html;
			});
			orderListNum++;
			if (orderListNum == 4) {
				addBtnEvent();
			}
		});

		function addBtnEvent() {
			$('.deleteOrder').on('click', function () {
				var orderId = this.dataset.orderid;
				var self = this;
				ServerUtil.api('change-web/orders/', 'delete', {
					ids: orderId
				}, function () {
					$(self).parent().parent().parent().parent().parent().parent().parent().remove();
				});
			});
			$('.toIntroduction').on('click', function () {
				var goodsId = this.dataset.goodsid;
				window.location.href = window.location.origin + '/change-web/introduction.html?goodsId=' + goodsId;
			});
		}
		$('#ai-topsearch').on('click', function (e) {
			e.preventDefault();
			var inputVal = encodeURI($('#searchInput').val() || '');
			window.location.href = window.location.origin + '/change-web/search.html?goodsName=' + inputVal;
		});
	});
</script>
<script src="./libs/js/amazeui.min.js"></script>

</html>